<%- layout('layouts/boilerplate') %>

<div class="container d-flex justify-content-center align-items-center">
    <div class="row">
        <div class="col-md-4 offset-md-4">
            <div class="card shadow">
                <img src="https://images.unsplash.com/photo-1571863533956-01c88e79957e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1267&q=80" class="card-img-top">
                <div class="card-body">
                    <h5 class="card-title"><strong>Register</strong></h5>
                    <form action="/register" method="POST" class="needs-validation" novalidate enctype="multipart/form-data">

                        <div class="mb-3">
                            <label class="form-label" for="username">Username </label>
                            <input class="form-control" type="text" name="username" id="username" required>
                            <div class="valid-feedback">Looks good!</div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label" for="email">Email </label>
                            <input class="form-control" type="email" name="email" id="email" required>
                            <div class="valid-feedback">Looks good!</div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label" for="password">Password </label>
                            <input class="form-control" type="password" name="password" id="password" required>
                            <div class="valid-feedback">Looks good!</div>
                        </div>

                        <!-- Profile Picture Input -->
                        <div class="mb-3">
                            <label class="form-label" for="profilePicture">Profile Picture </label>
                            <input class="form-control" type="file" name="profilePicture" id="profilePicture" accept="image/*">
                        </div>

                        <!-- Role Selection -->
                        <div class="mb-3">
                            <label class="form-label" for="role">Role </label>
                            <select class="form-select" name="role" id="role" onchange="showRoleFields()" required>
                                <option value="" disabled selected>Select Role</option>
                                <option value="Admin">Admin</option>
                                <option value="Author">Author</option>
                                <option value="Reader">Reader</option>
                            </select>
                        </div>

                        <!-- Additional fields for Author -->
                        <div id="authorFields" class="additional-fields" style="display:none;">
                            <div class="mb-3">
                                <label class="form-label" for="authorName">Author Name </label>
                                <input class="form-control" type="text" name="author[name]" id="authorName" required>
                                <div class="valid-feedback">Looks good!</div>
                            </div>

                            <div class="mb-3">
                                <label class="form-label" for="authorBio">Author Bio</label>
                                <textarea class="form-control" name="author[bio]" id="authorBio" rows="4" required></textarea>
                                <div class="valid-feedback">Looks good!</div>
                            </div>
                        </div>

                        <!-- Additional fields for Admin -->
                        <div id="adminFields" class="additional-fields" style="display:none;">
                            <div class="mb-3">
                                <label class="form-label" for="adminName">Admin Name </label>
                                <input class="form-control" type="text" name="admin[name]" id="adminName" required>
                                <div class="valid-feedback">Looks good!</div>
                            </div>
                        </div>

                        <!-- Additional fields for Reader -->
                        <div id="readerFields" class="additional-fields" style="display:none;">
                            <div class="mb-3">
                                <label class="form-label" for="readerName">Reader Name </label>
                                <input class="form-control" type="text" name="reader[name]" id="readerName" required>
                                <div class="valid-feedback">Looks good!</div>
                            </div>
                        </div>

                        <button class="btn btn-success">Register</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    function showRoleFields() {
        const role = document.getElementById('role').value;
        document.getElementById('authorFields').style.display = role === 'Author' ? 'block' : 'none';
        document.getElementById('adminFields').style.display = role === 'Admin' ? 'block' : 'none';
        document.getElementById('readerFields').style.display = role === 'Reader' ? 'block' : 'none';
    }
</script>

<!-- <script src="/javascripts/validateForm.js"></script> -->
