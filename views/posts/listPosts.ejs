<%- layout('layouts/boilerplate') %>

<div class="container px-4 px-lg-5 mt-5">
    <h2 class="text-center">Posts</h2>

    <% if (locals.success) { %>
        <div class="alert alert-success">
            <%= locals.success %>
        </div>
    <% } %>

    <% if (posts.length === 0) { %>
        <p class="text-center">No posts available.</p>
    <% } else { %>
        <div class="row gx-4 gx-lg-5 justify-content-center">
            <div class="col-md-10 col-lg-8 col-xl-7">
                <% posts.forEach(post => { %>
                    <div class="post-preview">
                        <a href="/posts/<%= post._id %>">
                            <h2 class="post-title"><%= post.title %></h2>
                            <h3 class="post-subtitle"><%- post.content.substring(0, 100) %>...</h3>
                        </a>
                        <p class="post-meta">
                            Posted by <%= post.author.name %> on <%= post.createdAt.toDateString() %>
                        </p>
                    </div>
                    <hr class="my-4" />
                <% }); %>
            </div>
        </div>
    <% } %>
</div>
